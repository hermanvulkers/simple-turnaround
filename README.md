# ✈️ Schiphol Turnaround Monitor

A (fake) real-time aircraft turnaround monitoring system built with modern web technologies and deployed on Kubernetes.  
This project demonstrates real-time event processing with Kafka, GraphQL subscriptions, and WebSocket communication.

> **Note**: This tinkering project was originally named "microblog" but has evolved into a (fake) real-time aircraft turnaround monitoring system. The name "microblog" is still used in some Kubernetes resources and Helm charts due to existing AKS (Azure Kubernetes Service) deployments that are cumbersome to rename. The application itself is now called "Simple Turnaround".

---

## 🔧 Stack

| Component        | Technology                    |
| ---------------- | ----------------------------- |
| Frontend         | React 19 + Vite + TypeScript  |
| Backend          | NestJS + GraphQL + WebSockets |
| Database         | Kafka (event streaming)       |
| Real-time        | GraphQL Subscriptions         |
| Containerization | Docker                        |
| Orchestration    | Kubernetes + Helm Charts      |
| Cluster          | Local development with Kind   |

---

## 🎯 What this project demonstrates

✅ Real-time event processing with Apache Kafka  
✅ GraphQL subscriptions for live updates  
✅ WebSocket communication with Socket.io  
✅ Modern React with TypeScript and Vite  
✅ NestJS backend with GraphQL and WebSocket support  
✅ Kubernetes deployment with Helm charts  
✅ Event-driven architecture  
✅ Real-time aircraft turnaround monitoring

---

## 🚀 Features

- **Real-time Updates**: Live aircraft turnaround events via GraphQL subscriptions
- **Event Streaming**: Kafka-based event processing for scalability
- **WebSocket Support**: Real-time bidirectional communication
- **Modern UI**: Clean, responsive interface with real-time event display
- **Kubernetes Ready**: Full containerization and orchestration support

---

## 🚀 Installation & Setup

### 1. Requirements

- [Docker](https://www.docker.com/)
- [kubectl](https://kubernetes.io/docs/tasks/tools/)
- [kind](https://kind.sigs.k8s.io/docs/user/quick-start/)
- [helm](https://helm.sh/)
- [Node.js](https://nodejs.org/) (for local development)

### 2. Clone the repo

```bash
git clone https://github.com/yourusername/k8s-microblog.git
cd k8s-microblog
```

### 3. Local Development

#### Backend

```bash
cd backend
npm install
npm run start:dev
```

#### Frontend

```bash
cd frontend
npm install
npm run dev
```

### 4. Kafka Setup (for local development)

```bash
# Start Kafka with Docker Compose
docker-compose -f kafka-stack.yaml up -d
```

### 5. Kubernetes Deployment

#### Set up the cluster

```bash
kind create cluster --name microblog
```

#### Build and load Docker images

```bash
docker build -t microblog-frontend -f Dockerfile.frontend .
docker build -t microblog-backend -f Dockerfile.backend .

kind load docker-image microblog-frontend --name microblog
kind load docker-image microblog-backend --name microblog
```

#### Deploy with Helm

```bash
helm install microblog ./charts/microblog
```

#### Port forwarding

```bash
kubectl port-forward svc/microblog-backend 3000:3000
kubectl port-forward svc/microblog-frontend 8080:80
```

Visit [http://localhost:8080](http://localhost:8080) to see the application.

---

## 📁 Project Structure

```
k8s-microblog/
├── backend/                 # NestJS backend
│   ├── src/
│   │   ├── core/           # Core services (Kafka)
│   │   ├── turnarounds/    # Turnaround module
│   │   └── main.ts         # Application entry point
│   └── package.json
├── frontend/               # React frontend
│   ├── src/
│   │   ├── hooks/         # Custom React hooks
│   │   ├── App.tsx        # Main application component
│   │   └── main.tsx       # Application entry point
│   └── package.json
├── charts/                 # Helm charts for Kubernetes
│   └── microblog/
├── Dockerfile.backend      # Backend container
├── Dockerfile.frontend     # Frontend container
└── kafka-stack.yaml        # Kafka development setup
```

---

## 🔄 Event Flow

1. **Event Generation**: Backend simulator creates turnaround events
2. **Kafka Processing**: Events are published to Kafka topics
3. **GraphQL Subscription**: Frontend subscribes to real-time updates
4. **UI Updates**: Frontend displays live turnaround events

---

## 🛠 Development

### Adding new turnaround events

Events are automatically generated by the simulator service. You can also manually trigger events via the UI button.

### GraphQL Schema

The backend exposes a GraphQL API with subscriptions for real-time turnaround updates.

### Kafka Topics

- `turnaround-events`: Main topic for turnaround event processing

---

## 📝 License

This project is for educational purposes and demonstrates modern web development practices with real-time capabilities.
